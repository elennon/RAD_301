@model IEnumerable<CA2.Order>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<div id="employeeDetails" class="DivPane" >
      @*@Html.Partial("_EmployeeDetails");*@
   @* @Html.Partial("ord");*@
    </div>

    <div id="Modal" class="modal fade">         @*// from bootstrap site http://getbootstrap.com/2.3.2/javascript.html*@
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Modal title</h4>
              </div>
              <div class="modal-body">
                  <p>This is the full address for this order</p>
                <p id="pAddress"> </p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
    </div>



    
<table class="table table-striped table-hover" id="table"   >
    
    <tr  >
        
        <th>
            @Html.DisplayNameFor(model => model.Customer.ContactName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.OrderDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RequiredDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ShippedDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ShipVia)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Freight)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ShipName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ShipAddress)
        </th>
        
        <th></th>
    </tr>

@foreach (var item in Model)
{
    <tr  >
    @using (Ajax.BeginForm("getEmployee","Home", new { @id = item.OrderID }, new AjaxOptions {  InsertionMode = InsertionMode.Replace, UpdateTargetId = "employeeDetails" },
    new { @class = "form-horizontal", @role = "form", id = "form" }))
    {
    
        @Html.HiddenFor(modelItem => item.EmployeeID)
        @*<tr onclick="location.href = '@(Url.Action("getAlbums", "orders", new { id = item.OrderId }))'" >*@
        <td>
            @Html.DisplayFor(modelItem => item.Customer.ContactName)
        </td>
        <td>
            @*@Html.DisplayFor(modelItem => item.OrderDate)*@
            @string.Format("{0: MM/dd/yy}", item.OrderDate)
        </td>
        <td>
           @* @Html.DisplayFor(modelItem => item.RequiredDate)*@
            @string.Format("{0: MM/dd/yy}", item.RequiredDate)
        </td>
        <td>
            @*@Html.DisplayFor(modelItem => item.ShippedDate)*@
            @string.Format("{0: MM/dd/yy}", item.ShippedDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ShipVia)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Freight)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ShipName)
        </td>
        <td>
            @*@Html.DisplayFor(modelItem => item.ShipAddress)*@
            @Html.Raw(item.ShipAddress)
        </td>
    }
        <td>
            @Html.ActionLink("Edit", "Edit", new { id = item.OrderID }) |
            @Html.ActionLink("Details", "Details", new { id = item.OrderID }) |
            @Html.ActionLink("Delete", "Delete", new { id = item.OrderID }, new { @class="btn btn-default" }) 
            
          
        </td>
    
    </tr>

}
</table>
    


@section scripts {

<script>

    $(document).ready(function () {      
        $('#table').on('click', 'tr',  function () {
            $("#employeeDetails").animate({
                left: '300px',
                opacity: '1.0',
                height: '350px',
                width: '250px'
            });
            
            var t = $(this).val();
           
            $('#form').submit();
            //alert("nofx");
            });
            
    });
   
    function getLongAddress(ad) {
        //alert(ad);
        $("#pAddress").text(ad)
        $("#Modal").modal('show')
    }

    function showDeleteBox(id) {
        //alert(id);
        $("#hidden").val(id)
        $("#DeleteCheck").modal('show')
    }

</script>
}