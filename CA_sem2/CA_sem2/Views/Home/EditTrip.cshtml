@model CA_sem2.Models.Trip

@{
    ViewBag.Title = "EditTrip";
}


@section Scripts {
    @*@Scripts.Render("~/bundles/jqueryval")*@
       <script type="text/javascript">
           $(function () {              
                   $("#lgs").change(function () {
                      
                       var lgs = {
                           Id: $(this).val()
                       };
                       $.ajax({
                           type: 'POST',
                           url: '/Home/_ShowLegs',
                           cache: false,
                           contentType: 'application/json; charset=utf-8',
                           data: JSON.stringify(lgs),
                           success: function (data) {
                               $("#showLegs").html(data);
                           },
                           error: function () {
                               alert("error");
                           }
                       });
                   });
               });          
        </script>
}

<h2>EditTrip</h2>

        
        <div  class="form-group"   >
            <div class="col-sm-3" id="showGuests"  style="float:right">
            </div>
        </div>

@using (Html.BeginForm()) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

        <div class="col-sm-5" style="float:left" >
            <div class="form-horizontal" role="form">
                <div class="form-group">
                    <label for="nme" class="col-sm-4 control-label">Trip Name</label>
                    <div class="col-sm-8">                 
                        <input type="text" class="form-control" value="@Model.TripName" id="nme" name="TripName" placeholder="Enter name">
                    </div>
                </div>
                <div class="form-group">
                    <label for="from" class="col-sm-4 control-label">Start Location</label>
                    <div class="col-sm-8">
                        <input type="text" value="@Model.StartLocation" class="form-control" id="from" name="StartLocation" placeholder="From">
                    </div>
                </div>
                <div class="form-group">
                    <label for="going" class="col-sm-4 control-label">Going to</label>
                    <div class="col-sm-8">
                        <input type="text" value="@Model.FinishLocation" class="form-control" id="going" name="FinishLocation" placeholder="To">
                    </div>
                </div>
                <div class="form-group">
                    <label for="sd" class="col-sm-4 control-label">Start date</label>
                    <div class="col-sm-8">
                        <input type="text" value="@Model.StartDate.ToShortDateString()" class="form-control" id="sd" name="StartDate" placeholder="start date">
                    </div>
                </div>
                <div class="form-group">
                    <label for="fd" class="col-sm-4 control-label">Finish date</label>
                    <div class="col-sm-8">
                        <input type="text" value="@Model.FinishDate.ToShortDateString()" class="form-control" id="fd" name="FinishDate" placeholder="finish date">
                    </div>
                </div>
                <div class="form-group">
                    <label for="mg" class="col-sm-4 control-label"  >Minnimum guests</label>
                    <div class="col-sm-8">
                        <input type="text" value="@Model.MinGuests" class="form-control" id="mg" name="MinGuests" placeholder="Minnimum guests">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="mg" class="col-sm-4 control-label">List of legs(so far)</label>
                <div class="col-sm-8" role="form" >
                    @using (Ajax.BeginForm("Create", "Home", null, new AjaxOptions { HttpMethod = "POST", InsertionMode = InsertionMode.Replace, UpdateTargetId = "showLegs" },
                            new { @class = "form-horizontal", @role = "form" }))
                            {
                            @Html.AntiForgeryToken()
                            @Html.ValidationSummary(true)
                    @Html.DropDownList("lgs", (SelectList)(ViewBag.Legs), new { @class = "form-control" })        
                    }
                </div>
            </div>
            <div>
                @Html.ActionLink("Back to List", "Index")
                @Ajax.ActionLink("show leg", "_ShowLegs", new { id= @Model.TripId }, new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "showLegs" })
             
            </div>            
        </div>   
}
<div  class="form-group"   >
            <div class="col-sm-4" id="showLegs" >
            </div>
        </div>
